<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="/meta/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/meta/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/meta/favicon-16x16.png">
  <link rel="manifest" href="/meta/site.webmanifest" crossorigin="anonymous">
  <link rel="mask-icon" href="/meta/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Garrett Roell is a PhD Student studying Chemical Engineering at 
      Washington University in St. Louis who loves writing code.">

  <!-- scripts -->
  <script src="/js/footer.js" defer></script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

  <!-- styles -->
  <link rel="stylesheet" href="/css/global.css">
  <link rel="stylesheet" href="/css/nav.css">
  <link rel="stylesheet" href="/css/footer.css">
  <link rel="stylesheet" href="/css/blog.css">

  <!-- inline font loading css -->
  <style>
    /* montserrat-regular - latin */
    @font-face {
      font-family: 'Montserrat';
      font-style: normal;
      font-weight: 400;
      src: url('../fonts/montserrat-v24-latin-regular.eot');
      /* IE9 Compat Modes */
      src: local(''),
        url('../fonts/montserrat-v24-latin-regular.eot?#iefix') format('embedded-opentype'),
        /* IE6-IE8 */
        url('../fonts/montserrat-v24-latin-regular.woff2') format('woff2'),
        /* Super Modern Browsers */
        url('../fonts/montserrat-v24-latin-regular.woff') format('woff'),
        /* Modern Browsers */
        url('../fonts/montserrat-v24-latin-regular.ttf') format('truetype'),
        /* Safari, Android, iOS */
        url('../fonts/montserrat-v24-latin-regular.svg#Montserrat') format('svg');
      /* Legacy iOS */
    }

    /* roboto-regular - latin */
    @font-face {
      font-family: 'Roboto';
      font-style: normal;
      font-weight: 400;
      src: url('../fonts/roboto-v30-latin-regular.eot');
      /* IE9 Compat Modes */
      src: local(''),
        url('../fonts/roboto-v30-latin-regular.eot?#iefix') format('embedded-opentype'),
        /* IE6-IE8 */
        url('../fonts/roboto-v30-latin-regular.woff2') format('woff2'),
        /* Super Modern Browsers */
        url('../fonts/roboto-v30-latin-regular.woff') format('woff'),
        /* Modern Browsers */
        url('../fonts/roboto-v30-latin-regular.ttf') format('truetype'),
        /* Safari, Android, iOS */
        url('../fonts/roboto-v30-latin-regular.svg#Roboto') format('svg');
      /* Legacy iOS */
    }
  </style>

  <!-- Title -->
  <title>Setup Digital Ocean Droplet</title>
</head>

<script>

  function writeClipboard(text) {

    navigator.clipboard.writeText(text).then(function () { }, function (error) {
      console.log('failed to write to clip board', error)
    });
  }

  document.addEventListener("DOMContentLoaded", function () {
    let codeButtons = document.getElementsByClassName('code-button')
    Array.from(codeButtons).forEach(button => {
      button.addEventListener("click", () => {
        // change text to copied for 5 seconds
        button.innerHTML = 'copied!'
        setTimeout(() => {
          button.innerHTML = 'copy'
        }, "5000")
      });
    })
  })


</script>

<body x-data="{ show: 'html' }">

  <!-- nav bar -->
  <nav>
    <div class="nav-outer">
      <ul class="nav-items">
        <li><a href="/" class="nav-item">Home</a></li>
        <li><a href="/#projects" class="nav-item">Projects</a></li>
        <li><a href="/#publications" class="nav-item">Publications</a></li>
        <li><a href="/#skills" class="nav-item">Skills</a></li>
        <li><a href="/resume" class="nav-item">Resume</a></li>
      </ul>
    </div>
  </nav>

  <!-- top spacer -->
  <div class="top-spacer"></div>


  <div class="blog-text-holder">
    <p class="blog-text-title">
      How to host 10+ sites for $5 per month
    </p>
    <p class="blog-text important-text">
      This is not a paid advertisement. It is an endorsement of a product I like.
    </p>
    <p class="blog-text">
      This guide explains how to set up Nginx on a DigitalOcean droplet to host 10+ websites for $5 a month. It
      covers the following types of websites:
    </p>
    <ul class="bullet-points">
      <li>an html page</li>
      <li>a single page app (<a href="https://reactjs.org/" target="_blank">React</a>)</li>
      <li>a node server (<a href="https://expressjs.com/" target="_blank">Express</a>)</li>
      <li>a python server (<a href="https://fastapi.tiangolo.com/" target="_blank">FastAPI</a>)</li>
    </ul>

    <p class="blog-text">
      You will need at least one custom domain name to complete this tutorial. Subdomains can be used to host each
      project at its own url.
    </p>

    <div class="step-1">
      <p class="blog-text-title">
        Step 1. Create a <a href="https://www.digitalocean.com/" target="_blank">DigitalOcean</a> account
      </p>
    </div>

    <div class="step-2">
      <p class="blog-text-title">
        Step 2. Create a droplet
      </p>
      <p class="blog-text">
        Create a droplet using the create button on the top navigation bar. A droplet is linux virtual machine with its
        own IP address. Choose the $5 option which comes with 1GB Memory / 25GB Storage / 1TB Bandwidth. Select the
        following options:
      </p>
      <ul class="bullet-points">
        <li>Ubuntu 20.04 (LTS) x64</li>
        <li>Basic shared CPU plan</li>
        <li>Regular with SSD CPU ($5/month)</li>
        <li>Pick a datacenter (I chose New York 1)</li>
      </ul>
      <p class="blog-text">
        Leave all other settings as their default options.
      </p>
      <p class="blog-text">
        Create a root password to allow you to access your server, and skip ssh setup.
      </p>
    </div>

    <div class="step-3">
      <p class="blog-text-title">
        Step 3. Set up server
      </p>
      <p class="blog-text">
        Find your server's public IP address on the DigitalOcean dashboard. Remotely access your server using a command
        line tool (On mac, I recommend <a href="https://iterm2.com/" target="_blank">iTerm2</a>).
      </p>
      <div>
        <img class="blog-image" src="../images/public_ip.webp" alt="screenshot showing your public IP address">

      </div>
      <div class="code-holder">
        <code>$ ssh root@<mark>your_server_ip</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('ssh root@your_server_ip')">
            copy
          </button>
        </div>
      </div>
      <p class="blog-text">
        The root user can make destructive changes. To avoid accidents, it is best practice to use a non-root account.
        Create a non-root user (use your name instead of mine) with a strong password, and skip all other questions.
      </p>
      <div class="code-holder">
        <code>$ adduser <mark>garrett</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('adduser garrett')">
            copy
          </button>
        </div>
      </div>
      <p class="blog-text">
        Grant administrative privileges to the new user. This command appends (-a) the user, garrett, to the group (-G)
        sudo.
      </p>
      <div class="code-holder">
        <code>$ usermod -aG sudo <mark>garrett</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('usermod -aG sudo garrett')">
            copy
          </button>
        </div>
      </div>
      <p class="blog-text">
        Log out of the root user session.
      </p>
      <div class="code-holder">
        <code>$ exit</code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('exit')">
            copy
          </button>
        </div>
      </div>
      <p class="blog-text">
        Log back into server using the new account.
      </p>
      <div class="code-holder">
        <code>$ ssh <mark>garrett</mark>@<mark>your_server_ip</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('ssh garrett@your_server_ip')">
            copy
          </button>
        </div>
      </div>
    </div>

    <div class="step-4">
      <p class="blog-text-title">
        Step 4. Install Nginx
      </p>
      <p class="blog-text">
        <a href="https://www.nginx.com/" target="_blank">Nginx</a> is a high performance web server.
      </p>
      <p class="blog-text">
        Update server.
      </p>
      <div class="code-holder">
        <code>$ sudo apt-get update</code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('sudo apt-get update')">
            copy
          </button>
        </div>
      </div>
      <p class="blog-text">
        Install nginx.
      </p>
      <div class="code-holder">
        <code>$ sudo apt-get install nginx</code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('sudo apt-get install nginx')">
            copy
          </button>
        </div>
      </div>
      <p class="blog-text">
        Confirm that the server is running default Nginx page.
      </p>
      <div class="code-holder">
        <code>http://<mark>server_domain_or_IP</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('http://server_domain_or_IP')">
            copy
          </button>
        </div>
      </div>
      <img class="blog-image" src="../images/nginx_default_page.webp" alt="Nginx default page" />
    </div>

    <div class="step-5">
      <p class="blog-text-title">
        Step 5. Clone git repository with shell projects
      </p>
      <p class="blog-text">
        This repo contains example projects for html, react, node, and python projects.
      </p>
      <p class="blog-text">
        Make sure that you are in your home directory so the apps folder has the location
        /home/<mark class="light">garrett</mark>/apps/.
      </p>
      <div class="code-holder">
        <div class="code-stack">
          <code>$ cd ~</code>
          <code>$ git clone https://github.com/garrettroell/droplet_set_up.git apps</code>
        </div>
        <div class="code-button-holder">
          <button class="code-button"
            onclick="writeClipboard('cd ~ \ngit clone https://github.com/garrettroell/droplet_set_up.git apps')">
            copy
          </button>
        </div>
      </div>

    </div>

    <div class="step-6">
      <p class="blog-text-title">
        Step 6. Choose the type of site you'd like to host
      </p>
      <div class="configuration-buttons">
        <button @click="show = 'html'" :class="show === 'html' ? 'selected-button' : '' ">HTML</button>
        <button @click="show = 'react'" :class="show === 'react' ? 'selected-button' : '' ">React</button>
        <button @click="show = 'node'" :class="show === 'node' ? 'selected-button' : '' ">Node</button>
        <button @click="show = 'python'" :class="show === 'python' ? 'selected-button' : '' ">Python</button>
      </div>
    </div>

    <div class="step-7">
      <p class="blog-text-title">
        Step 7. Connect a domain name to your server
      </p>
      <p class="blog-text">
        You need a domain name for this step. You can purchase one for about $10/year at <a
          href="https://namecheap.com">Namecheap</a>.
      </p>
      <p class="blog-text">
        In these examples, I use roell.dev. I'll demonstrate how a single domain can host multiple sites using
        subdomains.
      </p>
      <p class="blog-text">
        Add an A record to connect your domain name to your server. Put '@' as the host if you want to use
        the top level domain, or put a string as the host to use a subdomain. The image below is the Namecheap
        interface, but
        other domain providers should have similar DNS configuration interfaces.
      </p>
      <img class="blog-image" src="../images/a_record.webp" alt="namecheap interface for A record">
      <p class="blog-text">
        Confirm that the url is connected to your server.
      </p>
      <!-- html -->
      <div class="code-holder" x-show="show === 'html'">
        <code>$ dig <mark>html.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('dig html.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <!-- react -->
      <div class="code-holder" x-show="show === 'react'">
        <code>$ dig <mark>react.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('dig react.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <!-- node -->
      <div class="code-holder" x-show="show === 'node'">
        <code>$ dig <mark>node.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('dig node.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <!-- python -->
      <div class="code-holder" x-show="show === 'python'">
        <code>$ dig <mark>python.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('dig python.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <img x-show="show === 'html'" class="blog-image" src="../images/dig_results_html.webp"
        alt="result of dig command">
      <img x-show="show === 'react'" class="blog-image" src="../images/dig_results_react.webp"
        alt="result of dig command">
      <img x-show="show === 'node'" class="blog-image" src="../images/dig_results_node.webp"
        alt="result of dig command">
      <img x-show="show === 'python'" class="blog-image" src="../images/dig_results_python.webp"
        alt="result of dig command">
      <p class="blog-text">
        If the domain is connected, you should see your server's IP address. It may take more than a few minutes for the
        DNS changes to propagate.
      </p>
    </div>

    <div class="step-8">
      <div class="html-configuration" x-show="show === 'html'">
        <p class="blog-text-title">
          Step 8. Configure Nginx to host an HTML page
        </p>
        <p class="blog-text">
          Inspect the ~/apps/html folder.
        </p>
        <div class="code-holder">
          <div class="code-stack">
            <code>$ cd ~/apps/html</code>
            <code>$ ls</code>
          </div>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('cd ~/apps/html \nls')">
              copy
            </button>
          </div>
        </div>
        <p class="blog-text">
          Open index.html.
        </p>
        <div class="code-holder">
          <div class="code-stack">
            <code>$ nano index.html</code>
          </div>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('nano index.html')">
              copy
            </button>
          </div>
        </div>
        <p class="blog-text">
          This is the default index.html file. Replace my name with yours, and exit the editor by pressing "command + x"
          and then "y" and then "enter."
        </p>
        <!-- code snippet -->
        <div class="code-snippet">
          <div class="code-snippet-head">
            home/garrett/apps/html/index.html
          </div>
          <div class="code-snippet-body">
            <div class="code-stack">
              <code>&lt;html&gt; &nbsp;</code>
              <code>&nbsp;</code>
              <code>&lt;head&gt; &nbsp;</code>
              <code>&nbsp; &lt;title&gt;Welcome to <mark>Garrett</mark>&apos;s html site&lt;/title&gt; &nbsp;</code>
              <code>&lt;/head&gt; &nbsp;</code>
              <code>&nbsp;</code>
              <code>&lt;body&gt;</code>
              <code>&nbsp; &lt;h1&gt;Welcome to <mark>Garrett</mark>&apos;s html site!&lt;/h1&gt;</code>
              <code>&lt;/body&gt;</code>
              <code>&nbsp;</code>
              <code>&lt;/html&gt;</code>
            </div>
            <div class="code-button-holder">
              <button class="code-button"
                onclick="writeClipboard(`<html>\n\n<head>\n\t<title>Welcome to Garrett&apos;s html site</title>\n</head>\n\n<body>\n\t<h1>Welcome to Garrett&apos;s html site!</h1>\n</body>\n\n</html>`)">
                copy
              </button>
            </div>
          </div>
        </div>

        <p class="blog-text">
          Create an nginx configuration file named <mark class="light">html.roell.dev</mark>. It is common practice to
          have this file's name match the domain name it configures.
        </p>
        <div class="code-holder">
          <code>$ sudo nano /etc/nginx/sites-available/<mark>html.roell.dev</mark></code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo nano /etc/nginx/sites-available/html.roell.dev')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Copy and paste this code into the file. Exit the
          editor by pressing "command + x" and then "y" and then "enter."
        </p>

        <!-- code snippet -->
        <div class="code-snippet">
          <div class="code-snippet-head">
            /etc/nginx/sites-available/html.roell.dev
          </div>
          <div class="code-snippet-body">
            <div class="code-stack">
              <code>server {</code>
              <code>&nbsp; listen 80;</code>
              <code>&nbsp; server_name <mark>html.roell.dev</mark>;</code>
              <code>&nbsp;</code>
              <code>&nbsp; root /home/<mark>garrett</mark>/apps/html/;</code>
              <code>&nbsp; index index.html;</code>
              <code>&nbsp;</code>
              <code>&nbsp; location / {</code>
              <code>&nbsp; &nbsp; try_files $uri $uri/ =404;</code>
              <code>&nbsp; }</code>
              <code>}</code>
            </div>
            <div class="code-button-holder">
              <button class="code-button"
                onclick="writeClipboard(`server {\n\tlisten 80;\n\tserver_name html.roell.dev;\n\n\troot /home/garrett/apps/html/;\n\tindex index.html;\n\n\tlocation / {\n\t\ttry_files $uri $uri/ =404;\n\t}\n}`)">
                copy
              </button>
            </div>
          </div>
        </div>

        <p class="blog-text">
          Enable the configuration file by making a symbolic link.
        </p>
        <div class="code-holder">
          <code>$ sudo ln -s /etc/nginx/sites-available/<mark>html.roell.dev</mark> /etc/nginx/sites-enabled/</code>
          <div class="code-button-holder">
            <button class="code-button"
              onclick="writeClipboard('sudo ln -s /etc/nginx/sites-available/html.roell.dev /etc/nginx/sites-enabled/')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Check the Nginx configuration for syntax errors.
        </p>
        <div class="code-holder">
          <code>$ sudo nginx -t</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo nginx -t')">
              copy
            </button>
          </div>
        </div>
        <p class="blog-text">
          Restart Nginx.
        </p>
        <div class="code-holder">
          <code>$ sudo systemctl restart nginx</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo systemctl restart nginx')">
              copy
            </button>
          </div>
        </div>
      </div>

      <div class="react-configuration" x-show="show === 'react'">
        <p class="blog-text-title">
          Step 8. Configure Nginx to host a React app
        </p>
        <p class="blog-text">
          Inspect the ~/apps/react folder.
        </p>
        <div class="code-holder">
          <div class="code-stack">
            <code>$ cd ~/apps/react</code>
            <code>$ ls</code>
          </div>

          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('cd ~/apps/react\nls')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Install <a href="https://npmjs.com" target="_blank">npm</a>.
        </p>
        <div class="code-holder">
          <code>$ sudo apt install npm</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo apt install npm')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Install <a href="https://www.npmjs.com/package/n" target="_blank">n</a>, a node version manager.
        </p>
        <div class="code-holder">
          <code>$ sudo npm install --location=global n</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo npm install --location=global n')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Use the most recent long term support (lts) version of node.
        </p>
        <div class="code-holder">
          <code>$ sudo n lts</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo n lts')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Install dependencies. Make sure you are in ~/apps/react when you run this command.
        </p>
        <div class="code-holder">
          <code>$ sudo npm install</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo npm install')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Open src/App.jsx.
        </p>
        <div class="code-holder">
          <code>$ nano src/App.jsx</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('nano src/App.jsx')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          This is the default App.jsx file. Replace my name with yours, and exit the editor by pressing "command + x"
          and then "y" and then "enter."
        </p>

        <!-- code snippet -->
        <div class="code-snippet">
          <div class="code-snippet-head">
            home/garrett/apps/react/src/App.jsx
          </div>
          <div class="code-snippet-body">
            <div class="code-stack">
              <code>import { useState } from "react";</code>
              <code>import logo from "./logo.svg";</code>
              <code>import "./App.css";</code>
              <code>&nbsp;</code>
              <code>function App() {</code>
              <code>&nbsp; const [count, setCount] = useState(0);</code>
              <code>&nbsp;</code>
              <code>&nbsp; return (</code>
              <code>&nbsp; &nbsp; &lt;div className="App"&gt;</code>
              <code>&nbsp; &nbsp; &nbsp; &lt;header className="App-header"&gt;</code>
              <code>&nbsp; &nbsp; &nbsp; &nbsp; &lt;img src={logo} className="App-logo" alt="logo" /&gt;</code>
              <code>&nbsp; &nbsp; &nbsp; &nbsp; &lt;p&gt;Hello from <mark>Garrett</mark>'s React app&lt;/p&gt;</code>
              <code>&nbsp; &nbsp; &nbsp; &nbsp; &lt;p&gt;</code>
              <code>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button type="button" onClick={()=&gt; setCount((count) =&gt; count + 1)}&gt;</code>
              <code>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count is: {count}</code>
              <code>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/button&gt;</code>
              <code>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/p&gt;</code>
              <code>&nbsp; &nbsp; &nbsp; &lt;/header&gt;</code>
              <code>&nbsp; &nbsp; &lt;/div&gt;</code>
              <code>&nbsp; &nbsp; );</code>
              <code>}</code>
              <code>&nbsp;</code>
              <code>export default App;</code>
            </div>
            <div class="code-button-holder">
              <button class="code-button"
                onclick="writeClipboard(`import { useState } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nfunction App() {\n\tconst [count, setCount] = useState(0);\n\n\treturn (\n\t\t<div className='App'>\n\t\t\t<header className='App-header'>\n\t\t\t\t<img src={logo} className='App-logo' alt='logo' />\n\t\t\t\t<p>Hello from Garrett's React app</p>\n\t\t\t\t<p>\n\t\t\t\t\t<button type='button' onClick={()=> setCount((count) => count + 1)}>\n\t\t\t\t\t\tcount is: {count}\n\t\t\t\t\t</button>\n\t\t\t\t</p>\n\t\t\t</header>\n\t\t</div>\n\t);\n}\n\nexport default App;`)">
                copy
              </button>
            </div>
          </div>
        </div>

        <p class="blog-text">
          Rebuild site so 'dist' folder contains your change.
        </p>
        <div class="code-holder">
          <code>$ sudo npm run build</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo npm run build')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Create an nginx configuration file named <mark class="light">react.roell.dev</mark>. It is common practice to
          have this file's name match the domain name it configures.
        </p>
        <div class="code-holder">
          <code>$ sudo nano /etc/nginx/sites-available/<mark>react.roell.dev</mark></code>
          <div class="code-button-holder">
            <button class="code-button"
              onclick="writeClipboard('sudo nano /etc/nginx/sites-available/react.roell.dev')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Copy and paste this code into the file. Exit the editor by pressing "command + x" and then "y" and then
          "enter."
        </p>

        <!-- code snippet -->
        <div class="code-snippet">
          <div class="code-snippet-head">
            /etc/nginx/sites-available/react.roell.dev
          </div>
          <div class="code-snippet-body">
            <div class="code-stack">
              <code>server {</code>
              <code>&nbsp; server_name <mark>react.roell.dev</mark>;</code>
              <code>&nbsp;</code>
              <code>&nbsp; root /home/<mark>garrett</mark>/apps/react/dist/;</code>
              <code>&nbsp; index index.html;</code>
              <code>&nbsp;</code>
              <code>&nbsp; location / {</code>
              <code>&nbsp; &nbsp; try_files $uri /index.html;</code>
              <code>&nbsp; }</code>
              <code>}</code>
            </div>
            <div class="code-button-holder">
              <button class="code-button"
                onclick="writeClipboard(`server{\n\tserver_name react.roell.dev;\n\n\troot /home/garrett/apps/react/dist/;\n\tindex index.html;\n\n\tlocation / {\n\t\ttry_files $uri /index.html;\n\t}\n}`)">
                copy
              </button>
            </div>
          </div>
        </div>

        <p class="blog-text">
          Enable the configuration file by making a symbolic link.
        </p>
        <div class="code-holder">
          <code>$ sudo ln -s /etc/nginx/sites-available/<mark>react.roell.dev</mark> /etc/nginx/sites-enabled/</code>
          <div class="code-button-holder">
            <button class="code-button"
              onclick="writeClipboard('sudo ln -s /etc/nginx/sites-available/react.roell.dev /etc/nginx/sites-enabled/')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Check Nginx files for syntax errors.
        </p>
        <div class="code-holder">
          <code>$ sudo nginx -t</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo nginx -t')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Restart Nginx.
        </p>
        <div class="code-holder">
          <code>$ sudo systemctl restart nginx</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo systemctl restart nginx')">
              copy
            </button>
          </div>
        </div>
      </div>

      <div class="node-configuration" x-show="show === 'node'">
        <p class="blog-text-title">
          Step 8. Configure Nginx to host a node server
        </p>
        <p class="blog-text">
          Inspect the ~/apps/node folder
        </p>
        <div class="code-holder">
          <div class="code-stack">
            <code>$ cd ~/apps/node</code>
            <code>$ ls</code>
          </div>

          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('cd ~/apps/node\nls')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Install <a href="https://npmjs.com" target="_blank">npm</a>.
        </p>
        <div class="code-holder">
          <code>$ sudo apt install npm</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo apt install npm')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Install <a href="https://www.npmjs.com/package/n" target="_blank">n</a>, a node version manager.
        </p>
        <div class="code-holder">
          <code>$ sudo npm install --location=global n</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo npm install --location=global n')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Use the most recent long term support (lts) version of node.
        </p>
        <div class="code-holder">
          <code>$ sudo n lts</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo n lts')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Install dependencies. Make sure you are in ~/apps/node when you run this command.
        </p>
        <div class="code-holder">
          <code>$ sudo npm install</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo npm install')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Open index.js.
        </p>
        <div class="code-holder">
          <code>$ nano index.js</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('nano index.js')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          This is the default index.js file. Replace my name with yours, and exit the editor by pressing "command + x"
          and then "y" and then "enter."
        </p>

        <!-- code snippet -->
        <div class="code-snippet">
          <div class="code-snippet-head">
            home/garrett/apps/node/index.js
          </div>
          <div class="code-snippet-body">
            <div class="code-stack">
              <code>const express = require("express");</code>
              <code>&nbsp;</code>
              <code>const app = express();</code>
              <code>&nbsp;</code>
              <code>app.get("/", (req, res) => {</code>
              <code>&nbsp; res.send("Welcome to <mark>Garrett</mark>s node app");</code>
              <code>});</code>
              <code>&nbsp;</code>
              <code>app.listen(1234, () =></code>
              <code>&nbsp; console.log("Site is being hosted at http://localhost:1234.")</code>
              <code>);</code>

            </div>
            <div class="code-button-holder">
              <button class="code-button"
                onclick="writeClipboard(`const express = require('express');\n\nconst app = express();\n\napp.get('/', (req, res) => {\n\tres.send('Welcome to Garretts node app);\n});\n\napp.listen(1234, () =>\n\tconsole.log('Site is being hosted at http://localhost:1234.')\n);`)">
                copy
              </button>
            </div>
          </div>
        </div>

        <p class="blog-text">
          Install <a href="https://pm2.keymetrics.io/" target="_blank">pm2</a>, a process manager that runs
          node apps as background processes.
        </p>
        <div class="code-holder">
          <code>$ sudo npm install pm2 --location=global</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo npm install pm2 --location=global')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Start the node server, and give it a custom name.
        </p>
        <div class="code-holder">
          <code>$ pm2 start index.js --name <mark>gr-node</mark></code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('pm2 start index.js --name gr-node')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Confirm your node server is online.
        </p>
        <div class="code-holder">
          <code>$ pm2 ls</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('pm2 ls')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Create an nginx configuration file named <mark class="light">node.roell.dev</mark>. It is common practice to
          have this file's name match the domain name it configures.
        </p>

        <div class="code-holder">
          <code>$ sudo nano /etc/nginx/sites-available/<mark>node.roell.dev</mark></code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo nano /etc/nginx/sites-available/node.roell.dev')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Copy and paste this code into the file. Exit the editor by pressing "command + x" and then "y" and then
          "enter."
        </p>

        <!-- code snippet -->
        <div class="code-snippet">
          <div class="code-snippet-head">
            /etc/nginx/sites-available/node.roell.dev
          </div>
          <div class="code-snippet-body">
            <div class="code-stack">
              <code>server {</code>
              <code>&nbsp; server_name <mark>node.roell.dev</mark>;</code>
              <code>&nbsp;</code>
              <code>&nbsp; location / {</code>
              <code>&nbsp; proxy_pass http://localhost:1234</code>
              <code>&nbsp; proxy_http_version 1.1;</code>
              <code>&nbsp; proxy_set_header Upgrade $http_upgrade;</code>
              <code>&nbsp; proxy_set_header Host $host;</code>
              <code>&nbsp; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</code>
              <code>&nbsp; proxy_cache_bypass $http_upgrade;</code>
              <code>&nbsp; }</code>
              <code>}</code>
            </div>
            <div class="code-button-holder">
              <button class="code-button"
                onclick="writeClipboard(`server {\n\n\tserver_name node.roell.dev;\n\n\tlocation / {\n\tproxy_pass http://localhost:1234;\n\tproxy_http_version 1.1;\n\tproxy_set_header Upgrade $http_upgrade;\n\tproxy_set_header Connection 'upgrade';\n\tproxy_set_header Host $host;\n\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\tproxy_cache_bypass $http_upgrade;\n\t}\n}`)">
                copy
              </button>
            </div>
          </div>
        </div>

        <p class="blog-text">
          This file publically exposes what is running on http://localhost:1234 on node.roell.dev. This is an example of
          a <a href="https://en.wikipedia.org/wiki/Reverse_proxy" target="_blank">reverse proxy</a>.
        </p>

        <p class="blog-text">
          Enable the configuration file by making a symbolic link.
        </p>
        <div class="code-holder">
          <code>$ sudo ln -s /etc/nginx/sites-available/<mark>node.roell.dev</mark> /etc/nginx/sites-enabled/</code>
          <div class="code-button-holder">
            <button class="code-button"
              onclick="writeClipboard('sudo ln -s /etc/nginx/sites-available/node.roell.dev /etc/nginx/sites-enabled/')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Check Nginx files for syntax errors.
        </p>
        <div class="code-holder">
          <code>$ sudo nginx -t</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo nginx -t')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Restart Nginx.
        </p>
        <div class="code-holder">
          <code>$ sudo systemctl restart nginx</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo systemctl restart nginx')">
              copy
            </button>
          </div>
        </div>
      </div>

      <div class="python-configuration" x-show="show === 'python'">
        <p class="blog-text-title">
          Step 8. Configure Nginx to host a python server
        </p>
        <p class="blog-text">
          Inspect the ~/apps/python folder.
        </p>
        <div class="code-holder">
          <div class="code-stack">
            <code>$ cd ~/apps/python</code>
            <code>$ ls</code>
          </div>

          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('cd ~/apps/python\nls')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Install <a href="https://npmjs.com" target="_blank">npm</a>.
        </p>
        <div class="code-holder">
          <code>$ sudo apt install npm</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo apt install npm')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Install <a href="https://www.npmjs.com/package/n" target="_blank">n</a>, a node version manager.
        </p>
        <div class="code-holder">
          <code>$ sudo npm install --location=global n</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo npm install --location=global n')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Use the most recent long term support (lts) version of node.
        </p>
        <div class="code-holder">
          <code>$ sudo n lts</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo n lts')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Install packages for pip and python virtual environments.
        </p>
        <div class="code-holder">
          <div class="code-stack">
            <code>$ sudo apt install python3-pip</code>
            <code>$ sudo apt install python3.8-venv</code>
          </div>
          <div class="code-button-holder">
            <button class="code-button"
              onclick="writeClipboard('sudo apt install python3-pip\nsudo apt install python3.8-venv')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Create a virtual environment, and activate it.
        </p>
        <div class="code-holder">
          <div class="code-stack">
            <code>$ python3 -m venv venv</code>
            <code>$ source venv/bin/activate</code>
          </div>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('python3 -m venv venv\nsource venv/bin/activate')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Install dependencies. Make sure you are in ~/apps/python when you run this command.
        </p>
        <div class="code-holder">
          <code>$ pip install -r requirements.txt</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('pip install -r requirements.txt')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Open main.py.
        </p>
        <div class="code-holder">
          <code>$ nano main.py</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('nano main.py')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          This is the default main.py file. Replace my name with yours, and exit the editor by pressing "command + x"
          and then "y" and then "enter."
        </p>

        <!-- code snippet -->
        <div class="code-snippet">
          <div class="code-snippet-head">
            home/garrett/apps/python/main.py
          </div>
          <div class="code-snippet-body">
            <div class="code-stack">
              <code>from fastapi import FastAPI</code>
              <code>&nbsp;</code>
              <code>app = FastAPI()</code>
              <code>&nbsp;</code>
              <code>@app.get("/")</code>
              <code>def read_root():</code>
              <code>&nbsp; return 'Hello from <mark>Garrett</mark>s python app'</code>
            </div>
            <div class="code-button-holder">
              <button class="code-button"
                onclick="writeClipboard(`from fastapi import FastAPI\n\napp = FastAPI()\n\n@app.get('/')\ndef read_root():\n\treturn 'Hello from Garretts python app'`)">
                copy
              </button>
            </div>
          </div>
        </div>

        <p class="blog-text">
          Install <a href="https://pm2.keymetrics.io/" target="_blank">pm2</a>, a process manager that runs
          python apps as background processes.
        </p>
        <div class="code-holder">
          <code>$ sudo npm install pm2 --location=global</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo npm install pm2 --location=global')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Start the python server, and give it a custom name
        </p>
        <div class="code-holder">
          <code>$ pm2 start 'gunicorn -k uvicorn.workers.UvicornWorker main:app' --name <mark>gr-python</mark></code>
          <div class="code-button-holder">
            <button class="code-button"
              onclick="writeClipboard(`pm2 start 'gunicorn -k uvicorn.workers.UvicornWorker main:app' --name gr-python`)">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Confirm your python server is online
        </p>
        <div class="code-holder">
          <code>$ pm2 ls</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('pm2 ls')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Create an nginx configuration file named <mark class="light">python.roell.dev</mark>. It is common practice to
          have this file's name match the domain name it configures.
        </p>

        <div class="code-holder">
          <code>$ sudo nano /etc/nginx/sites-available/<mark>python.roell.dev</mark></code>
          <div class="code-button-holder">
            <button class="code-button"
              onclick="writeClipboard('sudo nano /etc/nginx/sites-available/python.roell.dev')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Copy and paste this code into the file. Exit the editor by pressing "command + x" and then "y" and then
          "enter."
        </p>

        <!-- code snippet -->
        <div class="code-snippet">
          <div class="code-snippet-head">
            /etc/nginx/sites-available/python.roell.dev
          </div>
          <div class="code-snippet-body">
            <div class="code-stack">
              <code>server {</code>
              <code>&nbsp; server_name <mark>python.roell.dev</mark>;</code>
              <code>&nbsp;</code>
              <code>&nbsp; location / {</code>
              <code>&nbsp; proxy_pass http://localhost:8000</code>
              <code>&nbsp; proxy_http_version 1.1;</code>
              <code>&nbsp; proxy_set_header Upgrade $http_upgrade;</code>
              <code>&nbsp; proxy_set_header Host $host;</code>
              <code>&nbsp; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</code>
              <code>&nbsp; proxy_cache_bypass $http_upgrade;</code>
              <code>&nbsp; }</code>
              <code>}</code>
            </div>
            <div class="code-button-holder">
              <button class="code-button"
                onclick="writeClipboard(`server {\n\n\tserver_name python.roell.dev;\n\n\tlocation / {\n\tproxy_pass http://localhost:8000;\n\tproxy_http_version 1.1;\n\tproxy_set_header Upgrade $http_upgrade;\n\tproxy_set_header Connection 'upgrade';\n\tproxy_set_header Host $host;\n\tproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n\tproxy_cache_bypass $http_upgrade;\n\t}\n}`)">
                copy
              </button>
            </div>
          </div>
        </div>

        <p class="blog-text">
          This file publically exposes what is running on http://localhost:8000 on python.roell.dev. This is an example
          of
          a <a href="https://en.wikipedia.org/wiki/Reverse_proxy" target="_blank">reverse proxy</a>.
        </p>

        <p class="blog-text">
          Enable the configuration file by making a symbolic link.
        </p>
        <div class="code-holder">
          <code>$ sudo ln -s /etc/nginx/sites-available/<mark>python.roell.dev</mark> /etc/nginx/sites-enabled/</code>
          <div class="code-button-holder">
            <button class="code-button"
              onclick="writeClipboard('sudo ln -s /etc/nginx/sites-available/python.roell.dev /etc/nginx/sites-enabled/')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Check Nginx files for syntax errors.
        </p>
        <div class="code-holder">
          <code>$ sudo nginx -t</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo nginx -t')">
              copy
            </button>
          </div>
        </div>

        <p class="blog-text">
          Restart Nginx.
        </p>
        <div class="code-holder">
          <code>$ sudo systemctl restart nginx</code>
          <div class="code-button-holder">
            <button class="code-button" onclick="writeClipboard('sudo systemctl restart nginx')">
              copy
            </button>
          </div>
        </div>

      </div>

    </div>

    <div class="step-9">
      <p class="blog-text-title">
        Step 9. Add SSL with LetsEncrypt
      </p>
      <p class="blog-text">
        Download certbot. This step only needs to happen once in the server's lifetime.
      </p>
      <div class="code-holder">
        <div class="code-stack">
          <code>$ sudo apt install certbot python3-certbot-nginx</code>
        </div>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('sudo apt install certbot python3-certbot-nginx')">
            copy
          </button>
        </div>
      </div>
      <p class="blog-text">
        Add an automatically renewing SSL certicate to your domain.
      </p>
      <!-- html -->
      <div class="code-holder" x-show="show === 'html'">
        <code>sudo certbot --nginx -d <mark>html.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('sudo certbot --nginx -d html.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <!-- react -->
      <div class="code-holder" x-show="show === 'react'">
        <code>sudo certbot --nginx -d <mark>react.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('sudo certbot --nginx -d react.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <!-- node -->
      <div class="code-holder" x-show="show === 'node'">
        <code>sudo certbot --nginx -d <mark>node.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('sudo certbot --nginx -d node.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <!-- python -->
      <div class="code-holder" x-show="show === 'python'">
        <code>sudo certbot --nginx -d <mark>python.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('sudo certbot --nginx -d python.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <p class="blog-text">
        Confirm that the site is working.
      </p>
      <!-- html -->
      <div class="code-holder" x-show="show === 'html'">
        <code>https://<mark>html.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('https://html.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <!-- react -->
      <div class="code-holder" x-show="show === 'react'">
        <code>https://<mark>react.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('https://react.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <!-- node -->
      <div class="code-holder" x-show="show === 'node'">
        <code>https://<mark>node.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('https://node.roell.dev')">
            copy
          </button>
        </div>
      </div>
      <!-- node -->
      <div class="code-holder" x-show="show === 'python'">
        <code>https://<mark>python.roell.dev</mark></code>
        <div class="code-button-holder">
          <button class="code-button" onclick="writeClipboard('https://python.roell.dev')">
            copy
          </button>
        </div>
      </div>
    </div>

    <div class="citations">
      <p class="blog-text-title">
        Citations
      </p>
      <p class="blog-text">
        1. <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-20-04"
          target="_blank">
          Initial Server Setup with Ubuntu 20.04
        </a>
      </p>
      <p class="blog-text">
        2. <a
          href="https://www.digitalocean.com/community/tutorials/how-to-set-up-nginx-server-blocks-virtual-hosts-on-ubuntu-16-04"
          target="_blank">
          How To Set Up NginxServer Blocks (Virtual Hosts) on Ubuntu 16.04
        </a>
      </p>
      <p class="blog-text">
        3. <a href="https://gist.github.com/bradtraversy/cd90d1ed3c462fe3bddd11bf8953a896" target="_blank">
          Node.js Deployment</a>
      </p>
      <p class="blog-text">
        4. <a href="https://www.travisluong.com/how-to-deploy-fastapi-with-nginx-and-pm2" target="_blank">
          How to deploy FastAPI with Nginx and PM2</a>
      </p>

      <!-- https://www.travisluong.com/how-to-deploy-fastapi-with-nginx-and-pm2/ -->

      <!-- https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-20-04 -->
    </div>

  </div>

  <!-- footer -->
  <div class="footer">
    <div class="footer-container">
      <p class="footer-name" id="footer-name"></p>
      <div class="footer-buttons">
        <!-- github button -->
        <a href="https://github.com/garrettroell/personal_site" target="_blank">
          <button class="footer-button">
            <img src="../icons/github-line.svg" alt="github icon" class="github-line-icon">
          </button>
        </a>
      </div>
    </div>
  </div>

</body>


</html>